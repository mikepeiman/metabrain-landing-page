import{S as le,i as ae,s as re,j as b,m as w,o as y,x as v,u as C,v as S,A as he,Q as L,R as O,k as R,n as W,f as A,U as x,d as E,a7 as F,af as te,ae as X}from"../../chunks/vendor-4c0561e8.js";import{C as pe}from"../../chunks/ColorInput.svelte_svelte_type_style_lang-2e1e6a0f.js";import{S as ne,C as ie}from"../../chunks/Checkbox-2618d2ea.js";import{O as oe}from"../../chunks/OptionSelect-0d823ea7.js";import"../../chunks/stores-6e146982.js";/* empty css                                                              */function ue(n){let a,r,h,o,p,i,f,N,T,m,M,$,_,P,k,g,I,q;function U(e){n[6](e)}let D={label:"Range",min:"10",max:"500",step:"10"};n[1].range!==void 0&&(D.value=n[1].range),a=new ne({props:D}),L.push(()=>O(a,"value",U));function z(e){n[7](e)}let s={label:"Number of nodes",min:"10",max:"1000",step:"10"};n[1].numNodes!==void 0&&(s.value=n[1].numNodes),o=new ne({props:s}),L.push(()=>O(o,"value",z)),o.$on("message",n[3](V,H));function t(e){n[8](e)}let l={items:n[1].lineCaps};n[1].lineCap!==void 0&&(l.selected=n[1].lineCap),f=new oe({props:l}),L.push(()=>O(f,"selected",t));function c(e){n[9](e)}let d={items:n[1].nodeTypes};n[1].nodeType!==void 0&&(d.selected=n[1].nodeType),m=new oe({props:d}),L.push(()=>O(m,"selected",c));function j(e){n[10](e)}let B={label:"Show nodes"};n[1].showNodes!==void 0&&(B.checked=n[1].showNodes),_=new ie({props:B}),L.push(()=>O(_,"checked",j));function G(e){n[11](e)}let Q={label:"Show lines"};return n[1].showLines!==void 0&&(Q.checked=n[1].showLines),g=new ie({props:Q}),L.push(()=>O(g,"checked",G)),{c(){b(a.$$.fragment),h=R(),b(o.$$.fragment),i=R(),b(f.$$.fragment),T=R(),b(m.$$.fragment),$=R(),b(_.$$.fragment),k=R(),b(g.$$.fragment)},l(e){w(a.$$.fragment,e),h=W(e),w(o.$$.fragment,e),i=W(e),w(f.$$.fragment,e),T=W(e),w(m.$$.fragment,e),$=W(e),w(_.$$.fragment,e),k=W(e),w(g.$$.fragment,e)},m(e,u){y(a,e,u),A(e,h,u),y(o,e,u),A(e,i,u),y(f,e,u),A(e,T,u),y(m,e,u),A(e,$,u),y(_,e,u),A(e,k,u),y(g,e,u),q=!0},p(e,u){const Y={};!r&&u&2&&(r=!0,Y.value=e[1].range,x(()=>r=!1)),a.$set(Y);const Z={};!p&&u&2&&(p=!0,Z.value=e[1].numNodes,x(()=>p=!1)),o.$set(Z);const J={};u&2&&(J.items=e[1].lineCaps),!N&&u&2&&(N=!0,J.selected=e[1].lineCap,x(()=>N=!1)),f.$set(J);const K={};u&2&&(K.items=e[1].nodeTypes),!M&&u&2&&(M=!0,K.selected=e[1].nodeType,x(()=>M=!1)),m.$set(K);const ee={};!P&&u&2&&(P=!0,ee.checked=e[1].showNodes,x(()=>P=!1)),_.$set(ee);const se={};!I&&u&2&&(I=!0,se.checked=e[1].showLines,x(()=>I=!1)),g.$set(se)},i(e){q||(v(a.$$.fragment,e),v(o.$$.fragment,e),v(f.$$.fragment,e),v(m.$$.fragment,e),v(_.$$.fragment,e),v(g.$$.fragment,e),q=!0)},o(e){C(a.$$.fragment,e),C(o.$$.fragment,e),C(f.$$.fragment,e),C(m.$$.fragment,e),C(_.$$.fragment,e),C(g.$$.fragment,e),q=!1},d(e){S(a,e),e&&E(h),S(o,e),e&&E(i),S(f,e),e&&E(T),S(m,e),e&&E($),S(_,e),e&&E(k),S(g,e)}}}function ce(n){let a,r;return a=new pe({props:{sketch:n[4],settings:n[2],data:n[1],hidePanel:n[0],$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){b(a.$$.fragment)},l(h){w(a.$$.fragment,h)},m(h,o){y(a,h,o),r=!0},p(h,[o]){const p={};o&2&&(p.data=h[1]),o&1&&(p.hidePanel=h[0]),o&4194306&&(p.$$scope={dirty:o,ctx:h}),a.$set(p)},i(h){r||(v(a.$$.fragment,h),r=!0)},o(h){C(a.$$.fragment,h),r=!1},d(h){S(a,h)}}}let V=800,H=800;function de(n,a,r){let{hidePanel:h=!1}=a,o;he(()=>{let s=document.getElementsByTagName("canvas")[0];r(5,o=s.getContext("2d")),console.log("\u{1F680} ~ file: sketch03.svelte ~ line 25 ~ onMount ~ context",o)});let p=[];const i={TITLE:"Sketch03",numNodes:200,range:200,lineCap:"butt",lineCaps:[{value:"butt",label:"butt"},{value:"round",label:"round"}],showNodes:!0,showLines:!0,nodeType:"hex",nodeTypes:[{value:"hex",label:"hex"},{value:"circle",label:"circle"}],lineWidth:2,lineWidthMax:5,radiusMin:10,radiusMax:30,animate:!0},f={dimensions:[V,H]};class N{constructor(t,l){this.x=t,this.y=l}getDistance(t){const l=this.x-t.x,c=this.y-t.y;return Math.sqrt(l*l+c*c)}}class T{constructor(t,l){this.pos=new N(t,l),this.vel=new N(F.range(-1,1),F.range(-1,1)),this.radius=F.range(i.radiusMin,i.radiusMax)}update(){this.pos.x+=this.vel.x,this.pos.y+=this.vel.y}bounce(t,l){(this.pos.x<=0||this.pos.x>=t)&&(this.vel.x*=-1),(this.pos.y<=0||this.pos.y>=l)&&(this.vel.y*=-1)}wrap(t,l){this.pos.x=(this.pos.x+t)%t,this.pos.y=(this.pos.y+l)%l}drawCircle(t){t.save(),t.translate(this.pos.x,this.pos.y),t.beginPath(),t.arc(0,0,this.radius,0,Math.PI*2),t.fill(),t.lineWidth=4,t.strokeStyle=this.color,t.stroke(),t.restore()}}class m extends T{constructor(t,l,c=6,d=0,j="hsla(180,50%,50%,1)"){super(t,l);this.numOfSides=c,this.positiveVelSum=parseFloat(M(this.vel.x).toFixed(3)+M(this.vel.y).toFixed(3)),this.color=$(this.positiveVelSum*360%360,50,50,1)}drawHex(t){t.save(),t.beginPath(),t.moveTo(this.pos.x+this.radius*Math.cos(0),this.pos.y+this.radius*Math.sin(0));for(let l=0;l<this.numOfSides;l++){let c=this.pos.x+this.radius*Math.cos(l*2*Math.PI/this.numOfSides),d=this.pos.y+this.radius*Math.sin(l*2*Math.PI/this.numOfSides);t.lineTo(c,d),t.fillStyle=this.color}t.fill(),t.restore()}}const M=s=>s<0?s*-1:s,$=(s,t,l,c)=>`hsla(${s},${t}%,${l}%,${c})`,_=(s,t)=>te.mapRange(t,0,s,1,0,!0),P=(s,t)=>{if(i.numNodes>p.length)for(let l=0;l<i.numNodes-p.length;l++){let c=F.range(0,s),d=F.range(0,t),j=new m(c,d);p.push(j)}else for(let l=0;l<p.length-i.numNodes;l++)p.pop()},k=()=>{P(V,H);for(let s=0;s<p.length;s++){const t=p[s];for(let l=s+1;l<p.length;l++){const c=p[l],d=t.pos.getDistance(c.pos);if(d>i.range)continue;r(5,o.lineWidth=te.mapRange(d,0,i.range,i.lineWidthMax,1),o),o.beginPath(),o.moveTo(t.pos.x,t.pos.y),i.showLines&&o.lineTo(c.pos.x,c.pos.y);let j=_(i.range,d),B=X.parse(t.color).hsla[0],G=X.parse(t.color).hsla[1],Q=X.parse(t.color).hsla[2];r(5,o.strokeStyle=$(B,G,Q,j),o),r(5,o.lineCap=i.lineCap,o),o.stroke()}}return()=>{r(5,o.fillStyle="black",o),o.fillRect(0,0,V,H),i.numNodes!=p.length,p.forEach(s=>{s.update(),i.showNodes&&(i.nodeType=="hex"?s.drawHex(o):s.drawCircle(o)),s.wrap(V,H)}),requestAnimationFrame(k())}};function g(s){n.$$.not_equal(i.range,s)&&(i.range=s,r(1,i))}function I(s){n.$$.not_equal(i.numNodes,s)&&(i.numNodes=s,r(1,i))}function q(s){n.$$.not_equal(i.lineCap,s)&&(i.lineCap=s,r(1,i))}function U(s){n.$$.not_equal(i.nodeType,s)&&(i.nodeType=s,r(1,i))}function D(s){n.$$.not_equal(i.showNodes,s)&&(i.showNodes=s,r(1,i))}function z(s){n.$$.not_equal(i.showLines,s)&&(i.showLines=s,r(1,i))}return n.$$set=s=>{"hidePanel"in s&&r(0,h=s.hidePanel)},n.$$.update=()=>{n.$$.dirty&32,n.$$.dirty&2},[h,i,f,P,k,o,g,I,q,U,D,z]}class be extends le{constructor(a){super();ae(this,a,de,ce,re,{hidePanel:0})}}export{be as default};
