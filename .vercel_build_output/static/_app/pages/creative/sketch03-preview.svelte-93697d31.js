import{S as W,i as E,s as I,j as O,m as A,o as F,x as H,u as V,v as q,A as L,af as C,ae as x,a7 as g}from"../../chunks/vendor-4c0561e8.js";import{C as R}from"../../chunks/ColorInput.svelte_svelte_type_style_lang-2e1e6a0f.js";/* empty css                                                              */import"../../chunks/stores-6e146982.js";function D(u){let l,i;return l=new R({props:{sketch:u[3],settings:u[1],data:u[2],hidePanel:u[0]}}),{c(){O(l.$$.fragment)},l(n){A(l.$$.fragment,n)},m(n,h){F(l,n,h),i=!0},p(n,[h]){const c={};h&2&&(c.settings=n[1]),h&1&&(c.hidePanel=n[0]),l.$set(c)},i(n){i||(H(l.$$.fragment,n),i=!0)},o(n){V(l.$$.fragment,n),i=!1},d(n){q(l,n)}}}function B(u,l,i){let{hidePanel:n=!0}=l,h,c,o,m;L(()=>{let t=document.getElementsByTagName("canvas");i(7,m=t[0]),i(6,o=m.getContext("2d"));let e=m.parentElement;i(4,h=e.offsetWidth),i(5,c=e.offsetHeight)});let p=[];const r={TITLE:"Sketch03-preview",numNodes:50,range:50,lineCap:"butt",lineCaps:[{value:"butt",label:"butt"},{value:"round",label:"round"}],showNodes:!1,showLines:!0,nodeType:"hex",nodeTypes:[{value:"hex",label:"hex"},{value:"circle",label:"circle"}],lineWidth:1,lineWidthMax:3,radiusMin:10,radiusMax:30,animate:!0},f={dimensions:[h,c],fps:60,scaleContext:!0};class v{constructor(e,s){this.x=e,this.y=s}getDistance(e){const s=this.x-e.x,a=this.y-e.y;return Math.sqrt(s*s+a*a)}}class w{constructor(e,s){this.pos=new v(e,s),this.vel=new v(g.range(-1,1),g.range(-1,1)),this.radius=g.range(r.radiusMin,r.radiusMax)}update(){this.pos.x+=this.vel.x*.2,this.pos.y+=this.vel.y*.2}bounce(e,s){(this.pos.x<=0||this.pos.x>=e)&&(this.vel.x*=-1),(this.pos.y<=0||this.pos.y>=s)&&(this.vel.y*=-1)}wrap(e,s){this.pos.x=(this.pos.x+e)%e,this.pos.y=(this.pos.y+s)%s}drawCircle(e){e.save(),e.translate(this.pos.x,this.pos.y),e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2),e.fill(),e.lineWidth=4,e.strokeStyle=this.color,e.stroke(),e.restore()}}class M extends w{constructor(e,s,a=6,d=0,y="hsla(180,50%,50%,1)"){super(e,s);this.numOfSides=a,this.positiveVelSum=parseFloat(_(this.vel.x).toFixed(3)+_(this.vel.y).toFixed(3)),this.color=k(this.positiveVelSum*360%360,50,50,1)}drawHex(e){e.save(),e.beginPath(),e.moveTo(this.pos.x+this.radius*Math.cos(0),this.pos.y+this.radius*Math.sin(0));for(let s=0;s<this.numOfSides;s++){let a=this.pos.x+this.radius*Math.cos(s*2*Math.PI/this.numOfSides),d=this.pos.y+this.radius*Math.sin(s*2*Math.PI/this.numOfSides);e.lineTo(a,d),e.fillStyle=this.color}e.fill(),e.restore()}}const _=t=>t<0?t*-1:t,k=(t,e,s,a)=>`hsla(${t},${e}%,${s}%,${a})`,b=(t,e)=>C.mapRange(e,0,t,1,0,!0),P=(t,e)=>{if(r.numNodes>p.length)for(let s=0;s<r.numNodes-p.length;s++){let a=g.range(0,t),d=g.range(0,e),y=new M(a,d);p.push(y)}else for(let s=0;s<p.length-r.numNodes;s++)p.pop()},S=()=>{P(h,c);for(let t=0;t<p.length;t++){const e=p[t];for(let s=t+1;s<p.length;s++){const a=p[s],d=e.pos.getDistance(a.pos);if(d>r.range)continue;i(6,o.lineWidth=C.mapRange(d,0,r.range,r.lineWidthMax,1),o),o.beginPath(),o.moveTo(e.pos.x,e.pos.y),r.showLines&&o.lineTo(a.pos.x,a.pos.y);let y=b(r.range,d),T=x.parse(e.color).hsla[0],N=x.parse(e.color).hsla[1],j=x.parse(e.color).hsla[2];i(6,o.strokeStyle=k(T,N,j,y),o),i(6,o.lineCap=r.lineCap,o),o.stroke()}}return()=>{i(6,o.fillStyle="black",o),o.fillRect(0,0,h,c),r.numNodes!=p.length,p.forEach(t=>{t.update(),r.showNodes&&(r.nodeType=="hex"?t.drawHex(o):t.drawCircle(o)),t.bounce(h,c)}),requestAnimationFrame(S())}};return u.$$set=t=>{"hidePanel"in t&&i(0,n=t.hidePanel)},u.$$.update=()=>{u.$$.dirty&192&&m&&i(6,o=m.getContext("2d")),u.$$.dirty&16&&i(1,f.dimensions[0]=h,f),u.$$.dirty&32&&i(1,f.dimensions[1]=c,f)},[n,f,r,S,h,c,o,m]}class Q extends W{constructor(l){super();E(this,l,B,D,I,{hidePanel:0})}}export{Q as default};
