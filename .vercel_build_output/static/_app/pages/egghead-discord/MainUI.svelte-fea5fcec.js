import{S as z,i as F,s as G,e as I,k as N,j as k,c as b,a as w,d as v,n as V,m as y,b as j,f as D,D as g,o as $,x as h,l as p,u as m,v as M,w as S,M as H,A as J,r as C}from"../../chunks/vendor-4c0561e8.js";import{D as E}from"../../chunks/discord-db2ca6fe.js";import K from"./Server.svelte-5e07db3e.js";import L from"./Channels.svelte-ef4c32bd.js";import O from"./Messages.svelte-27b6df6d.js";import"../../chunks/stores-6e146982.js";import"../../chunks/Channel-62316566.js";function U(i,r,t){const e=i.slice();return e[6]=r[t],e}function q(i){let r,t,e,n,a,l,o,f,s=i[2]&&A(i);return a=new L({props:{servers:i[2],serverIndex:i[4]}}),o=new O({props:{serverId:i[0],channelId:i[1]}}),{c(){r=I("div"),t=I("div"),s&&s.c(),e=N(),n=I("div"),k(a.$$.fragment),l=N(),k(o.$$.fragment),this.h()},l(c){r=b(c,"DIV",{class:!0});var d=w(r);t=b(d,"DIV",{class:!0});var u=w(t);s&&s.l(u),u.forEach(v),e=V(d),n=b(d,"DIV",{class:!0});var _=w(n);y(a.$$.fragment,_),_.forEach(v),l=V(d),y(o.$$.fragment,d),d.forEach(v),this.h()},h(){j(t,"class","hidden md:block bg-gray-800 p-3 min-w-19 shrink-0 space-y-2 overflow-y-scroll svelte-42ayt6"),j(n,"class","hidden md:flex bg-gray-800 w-60 flex-col shrink-0 svelte-42ayt6"),j(r,"class","flex flex-row text-white h-screen w-full svelte-42ayt6")},m(c,d){D(c,r,d),g(r,t),s&&s.m(t,null),g(r,e),g(r,n),$(a,n,null),g(r,l),$(o,r,null),f=!0},p(c,d){c[2]?s?(s.p(c,d),d&4&&h(s,1)):(s=A(c),s.c(),h(s,1),s.m(t,null)):s&&(C(),m(s,1,1,()=>{s=null}),S());const u={};d&4&&(u.servers=c[2]),d&16&&(u.serverIndex=c[4]),a.$set(u);const _={};d&1&&(_.serverId=c[0]),d&2&&(_.channelId=c[1]),o.$set(_)},i(c){f||(h(s),h(a.$$.fragment,c),h(o.$$.fragment,c),f=!0)},o(c){m(s),m(a.$$.fragment,c),m(o.$$.fragment,c),f=!1},d(c){c&&v(r),s&&s.d(),M(a),M(o)}}}function A(i){let r,t,e=i[2],n=[];for(let l=0;l<e.length;l+=1)n[l]=B(U(i,e,l));const a=l=>m(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();r=p()},l(l){for(let o=0;o<n.length;o+=1)n[o].l(l);r=p()},m(l,o){for(let f=0;f<n.length;f+=1)n[f].m(l,o);D(l,r,o),t=!0},p(l,o){if(o&4){e=l[2];let f;for(f=0;f<e.length;f+=1){const s=U(l,e,f);n[f]?(n[f].p(s,o),h(n[f],1)):(n[f]=B(s),n[f].c(),h(n[f],1),n[f].m(r.parentNode,r))}for(C(),f=e.length;f<n.length;f+=1)a(f);S()}},i(l){if(!t){for(let o=0;o<e.length;o+=1)h(n[o]);t=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)m(n[o]);t=!1},d(l){H(n,l),l&&v(r)}}}function B(i){let r,t;return r=new K({props:{serverId:i[6].id,serverName:i[6].name}}),{c(){k(r.$$.fragment)},l(e){y(r.$$.fragment,e)},m(e,n){$(r,e,n),t=!0},p(e,n){const a={};n&4&&(a.serverId=e[6].id),n&4&&(a.serverName=e[6].name),r.$set(a)},i(e){t||(h(r.$$.fragment,e),t=!0)},o(e){m(r.$$.fragment,e),t=!1},d(e){M(r,e)}}}function P(i){let r,t,e=i[3]&&q(i);return{c(){e&&e.c(),r=p()},l(n){e&&e.l(n),r=p()},m(n,a){e&&e.m(n,a),D(n,r,a),t=!0},p(n,[a]){n[3]?e?(e.p(n,a),a&8&&h(e,1)):(e=q(n),e.c(),h(e,1),e.m(r.parentNode,r)):e&&(C(),m(e,1,1,()=>{e=null}),S())},i(n){t||(h(e),t=!0)},o(n){m(e),t=!1},d(n){e&&e.d(n),n&&v(r)}}}function Q(i,r,t){let{serverId:e,channelId:n}=r,a,l,o=!1,f;return J(async()=>{if(t(2,a=await E.readServers("discordDummyData")),a||t(2,a=await E.generateServers(30)),e!=="home"){let s=a.findIndex(c=>c.id===e);t(5,l=a[s].channels)}else t(5,l=a[0].channels);a.forEach(async s=>{s.channels.length<1&&s.id&&t(5,l=await E.generateChannels(s.id))}),t(3,o=!0)}),i.$$set=s=>{"serverId"in s&&t(0,e=s.serverId),"channelId"in s&&t(1,n=s.channelId)},i.$$.update=()=>{i.$$.dirty&5&&a&&t(4,f=a.findIndex(s=>s.id===e)),i.$$.dirty&36},[e,n,a,o,f,l]}class ee extends z{constructor(r){super();F(this,r,Q,P,G,{serverId:0,channelId:1})}}export{ee as default};
